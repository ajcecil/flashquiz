<!DOCTYPE html>
<html>
  <head>
    <title>Flashcards - Flashquiz</title>

    <!-- link out to your CSS -->
    <link rel="stylesheet" href="flashquiz_styles.css" />
  </head>

  <body>
    <header class="header">
      <a href="index.html" class="header-logo-link">
        <img src="brand_images/smiley.png" alt="logo" class="header-logo">
      </a>
      <h1>Flashquiz</h1>
    </header>
    <nav class="menu-bar">
      <ul class="menu">
        <li class="dropdown">
          <a href="index.html">Home</a>
        </li>
        <li class="dropdown">
          <a href="#">Tools ▾</a>
          <ul class="dropdown-menu">
            <li><a href="flashcard.html">Flashcards</a></li>
            <li><a href="matching_game.html">Matching Game</a></li>
            <li><a href= "vocab_quiz.html">Vocab Test</a></li>
          </ul>
        </li>
        <li class="dropdown">
            <a href="https://www.merriam-webster.com"  target="_blank">Dictioary</a>
        </li>
      </ul>
    </nav>

    <section id="overview"></section>

    <!-- === Flashcard Generator Section === -->
    <div class="flashcard-generator">
        <h2>Flashcard Generator</h2>

        <!-- Display area for the flashcard -->
        <div class="flashcard-container">
            <button id="prevCard" class="nav-btn">⟨</button>
            <div class="flashcard" id="flashcard">
                <div class="front" id="flashcardFront">Front of card</div>
                <div class="back" id="flashcardBack">Back of card</div>
            </div>
            <button id="nextCard" class="nav-btn">⟩</button>
        </div>

        <!-- Card creation area -->
        <div class="card-creator">
            <input type="text" id="frontText" placeholder="Front text" />
            <input type="text" id="backText" placeholder="Back text" />
            <button id="addCardBtn">Add Card</button>
        </div>

        <!-- Deck controls -->
        <div class="deck-actions">
            <input type="file" id="importFile" accept=".csv" />
            <button id="downloadDeckBtn">Download Deck (.csv)</button>
        </div>


        <!-- Deck list -->
        <div id="deckList" class="deck-list">
            <h3>Current Deck</h3>
            <ul id="cardList"></ul>
        </div>
    </div>
    <!-- === End Flashcard Generator Section === -->






    <script>
      const header   = document.querySelector('.header');
      const menuBar  = document.querySelector('.menu-bar');
      let   lastScroll = window.pageYOffset;
    
      // on load: menu sits under the header
      menuBar.classList.add('initial');
    
      window.addEventListener('scroll', () => {
        const current = window.pageYOffset;
    
        if (current > lastScroll && current > header.offsetHeight) {
          // scrolling DOWN past the header → hide header, pin menu to top
          header.classList.add('hidden');
          menuBar.classList.remove('initial');
          menuBar.style.top = '0';
        } else if (current < lastScroll) {
          // scrolling UP → show header again, push menu back down
          header.classList.remove('hidden');
          menuBar.classList.add('initial');
          menuBar.style.top = header.offsetHeight + 'px';
        }
    
        lastScroll = current;
      });
    </script>
    
    <script>
        const frontInput = document.getElementById("frontText");
        const backInput = document.getElementById("backText");
        const addCardBtn = document.getElementById("addCardBtn");
        const cardList = document.getElementById("cardList");
        const importFile = document.getElementById("importFile");
        const downloadDeckBtn = document.getElementById("downloadDeckBtn");

        const flashcard = document.getElementById("flashcard");
        const flashcardFront = document.getElementById("flashcardFront");
        const flashcardBack = document.getElementById("flashcardBack");

        const prevBtn = document.getElementById("prevCard");
        const nextBtn = document.getElementById("nextCard");

        let flashcards = [];
        let currentIndex = -1;

        // Flip card on click
        flashcard.addEventListener("click", () => {
            flashcard.classList.toggle("flipped");
        });

        // Add a new flashcard
        addCardBtn.addEventListener("click", () => {
            const front = frontInput.value.trim();
            const back = backInput.value.trim();
            if (front && back) {
            flashcards.push({ front, back });
            updateCardList();
            showCard(flashcards.length - 1);
            frontInput.value = "";
            backInput.value = "";
            } else {
            alert("Please fill in both fields.");
            }
        });

        // Show a specific flashcard
        function showCard(index) {
            if (index < 0 || index >= flashcards.length) return;
            currentIndex = index;
            flashcardFront.textContent = flashcards[index].front;
            flashcardBack.textContent = flashcards[index].back;
            flashcard.classList.remove("flipped");
        }

        // Update list display
        function updateCardList() {
            cardList.innerHTML = "";
            flashcards.forEach((card, index) => {
            const li = document.createElement("li");
            li.textContent = `${index + 1}. ${card.front} → ${card.back}`;
            li.style.cursor = "pointer";
            li.addEventListener("click", () => showCard(index));
            cardList.appendChild(li);
            });
        }

            // --- Import from .csv ---
            importFile.addEventListener("change", (e) => {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function (evt) {
                const lines = evt.target.result.split("\n").map(line => line.trim()).filter(l => l);
                const header = lines[0].split(",").map(h => h.trim().toLowerCase());
                const frontIndex = header.indexOf("front");
                const backIndex = header.indexOf("back");

                // Skip header line
                for (let i = 1; i < lines.length; i++) {
                const cols = lines[i].split(",");
                if (cols.length >= 2) {
                    const front = cols[frontIndex >= 0 ? frontIndex : 0].trim();
                    const back = cols[backIndex >= 0 ? backIndex : 1].trim();
                    if (front && back) flashcards.push({ front, back });
                }
                }

                updateCardList();
                if (flashcards.length > 0) showCard(0);
            };
            reader.readAsText(file);
            });

            // --- Download as .csv ---
            downloadDeckBtn.addEventListener("click", () => {
            if (flashcards.length === 0) {
                alert("No cards to download!");
                return;
            }

            // Add header row
            const header = "Front,Back";
            const rows = flashcards.map(c => `"${c.front.replace(/"/g, '""')}","${c.back.replace(/"/g, '""')}"`);
            const content = [header, ...rows].join("\n");

            const blob = new Blob([content], { type: "text/csv" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "flashcard_deck.csv";
            a.click();
            URL.revokeObjectURL(url);
            });


        // --- Navigation buttons ---
        nextBtn.addEventListener("click", () => {
        if (flashcards.length === 0) return;
        currentIndex = (currentIndex + 1) % flashcards.length;
        showCard(currentIndex);
        });

        prevBtn.addEventListener("click", () => {
        if (flashcards.length === 0) return;
        currentIndex = (currentIndex - 1 + flashcards.length) % flashcards.length;
        showCard(currentIndex);
        });

        // Optional: Keyboard navigation (← →)
        document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight") nextBtn.click();
        if (e.key === "ArrowLeft") prevBtn.click();
        });

    </script>


  </body>
</html>